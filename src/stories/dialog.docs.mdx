import { Meta, Canvas, Controls } from '@storybook/blocks'
import * as DialogStories from './dialog.stories'

<Meta of={DialogStories} />

# Dialog

A modal dialog component built on Radix UI for displaying content that requires user attention.

## Usage

```tsx
import {
  Dialog,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from '@tc96/ui-react'
import { Button } from '@tc96/ui-react'

function Example() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button>Open Dialog</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Dialog Title</DialogTitle>
          <DialogDescription>
            Dialog description or instructions
          </DialogDescription>
        </DialogHeader>
        <p>Your content here</p>
      </DialogContent>
    </Dialog>
  )
}
```

## Examples

### Basic Dialog
<Canvas of={DialogStories.Default} />

### With Footer Actions
<Canvas of={DialogStories.WithFooter} />

### With Form
<Canvas of={DialogStories.WithForm} />

## Sub-Components

- **Dialog**: Root component, manages open/close state
- **DialogTrigger**: Button that opens the dialog (use with `asChild`)
- **DialogContent**: The modal content container
- **DialogHeader**: Top section for title and description
- **DialogTitle**: Accessible dialog title (required for a11y)
- **DialogDescription**: Additional context or instructions
- **DialogFooter**: Bottom section for action buttons
- **DialogClose**: Optional close button component

## Controlled Dialog

Manage the open state manually:

```tsx
function ControlledDialog() {
  const [open, setOpen] = React.useState(false)

  return (
    <Dialog open={open} onOpenChange={setOpen}>
      <DialogTrigger asChild>
        <Button>Open</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Controlled Dialog</DialogTitle>
        </DialogHeader>
        <p>Content here</p>
        <DialogFooter>
          <Button onClick={() => setOpen(false)}>Close</Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}
```

## Common Patterns

### Confirmation Dialog
```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button variant="destructive">Delete Account</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Are you absolutely sure?</DialogTitle>
      <DialogDescription>
        This action cannot be undone. This will permanently delete your
        account and remove your data from our servers.
      </DialogDescription>
    </DialogHeader>
    <DialogFooter>
      <Button variant="ghost">Cancel</Button>
      <Button variant="destructive">Delete Account</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### Form Dialog
```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button>Add User</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Add New User</DialogTitle>
      <DialogDescription>
        Enter the details of the new user below.
      </DialogDescription>
    </DialogHeader>
    <form className="space-y-4">
      <div className="space-y-2">
        <label htmlFor="name">Name</label>
        <Input id="name" placeholder="John Doe" />
      </div>
      <div className="space-y-2">
        <label htmlFor="email">Email</label>
        <Input id="email" type="email" placeholder="john@example.com" />
      </div>
      <DialogFooter>
        <Button type="submit">Save User</Button>
      </DialogFooter>
    </form>
  </DialogContent>
</Dialog>
```

### Alert Dialog
```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button>Show Alert</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Payment Successful</DialogTitle>
      <DialogDescription>
        Your payment has been processed successfully. You will receive a
        confirmation email shortly.
      </DialogDescription>
    </DialogHeader>
    <DialogFooter>
      <Button>OK</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

## Accessibility

Built on Radix UI Dialog with comprehensive accessibility:

- **Focus Management**: Focus is trapped within dialog when open
- **Keyboard Navigation**:
  - `Escape` to close
  - `Tab` to cycle through focusable elements
- **ARIA Attributes**: Proper `aria-labelledby` and `aria-describedby`
- **Screen Readers**: Title and description are announced
- **Inert Background**: Background content is inert when dialog is open

**Important**: Always include `DialogTitle` for screen reader announcements.

## Best Practices

✅ **Do:**
- Always provide a DialogTitle (required for a11y)
- Use DialogDescription for additional context
- Keep dialog content focused and concise
- Use appropriate button variants (destructive for dangerous actions)
- Return focus to trigger element on close
- Use controlled state for complex interactions

❌ **Don't:**
- Nest dialogs inside other dialogs
- Use dialogs for non-critical information (use Alert instead)
- Make dialogs too wide (max ~500px)
- Include too much content (consider a separate page)
- Use dialogs that auto-open without user action
- Forget to handle form submission

## Animation

The dialog includes built-in animations:
- Fade in/out for overlay
- Zoom and slide for content
- Smooth transitions for open/close

## Props

<Controls />
